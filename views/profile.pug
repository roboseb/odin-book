extends layout

block content
    include user-card

    #profile-info 
        .pic(style=`background-image: url('../images/icons/${user_preview.pic}.png')`)
            #profile-details
                #profile-username= user_preview.username
                #profile-join-date= `Joined: ${user_preview.joinDate.toLocaleDateString("en-US")}` 
                #profile-likes= `${user_preview.likes} Likes`

    #friends-panels
        #friends-panel.panel
            .panel-header(onclick='togglePanel(this)') Friends
        
        if user && user_preview.username === user.username
            #outgoing-panel.panel 
                .panel-header(onclick='togglePanel(this)') Outgoing Requests
                if user.outgoingRequests.length > 0
                    each request in user.outgoingRequests
                        div= request

            #incoming-panel.panel 
                .panel-header(onclick='togglePanel(this)') Incoming Requests
                if user.incomingRequests.length > 0
                    each request in user.incomingRequests
                        .accept-request-box
                            div= request
                            button.accept-request-btn(onclick=`acceptFriend(event, ${JSON.stringify(request)})`) Accept Friend


    #side-panels

        if user && user.username !== user_preview.username
            #add-friend-btn.panel.collapsed
                - console.log(user)
                .panel-header(onclick=`addFriend(${JSON.stringify(user_preview)})`)=user.outgoingRequests.includes(user_preview.username) ? 'Request Sent' : 'Add Friend'

        #friends-panel.panel 
            .panel-header(onclick='togglePanel(this)') Dice

        #profile-panel.panel
            .panel-header(onclick='togglePanel(this)') Cards

        #dice-panel.panel.collapsed
            .panel-header(onclick='togglePanel(this)') Cosmetics
 
        #users-panel.panel 
            .panel-header(onclick='togglePanel(this)') Users

            #user-list 
                //- each user in user_list 
                //-     .user-list-username.username= user.username
                //-         +user-card(user)



    script(src='/javascripts/script.js')